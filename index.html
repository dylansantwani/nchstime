<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="easyRender.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    animation: {
                        border: 'background ease infinite',
                    },
                    keyframes: {
                        background: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                    },
                },
            }
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        h1 {
            margin-bottom: 20px;
        }

        #output {
            font-size: 1.5em;
            text-align: center;
        }
    </style>
</head>

<body class="bg-gray-900">

    <article 
        class="hover:animate-background rounded-xl bg-gradient-to-r from-green-300 via-blue-500 to-purple-600 p-0.5 shadow-xl transition hover:bg-[length:400%_400%] hover:shadow-sm hover:[animation-duration:_4s] dark:shadow-gray-700/25 max-w-lg w-full">
        <div class="rounded-[10px] bg-white p-5 !pt-20 sm:p-6 dark:bg-gray-900">
            <time datetime="2022-10-10" class="block text-xs text-gray-500 dark:text-gray-400">
                Schedule Tracker
            </time>

            <a href="#">
                <h3 id="current-period" class="mt-0.5 text-xl sm:text-2xl font-medium text-gray-900 dark:text-white">
                    Loading....
                </h3>
                <h3 id="time-left" class="mt-0.5 text-xl sm:text-2xl font-medium text-gray-900 dark:text-white">
                    Loading....
                </h3>
            </a>
            <time datetime="2022-10-10" class="block text-xs text-gray-500 dark:text-gray-400">
                Created by Dylan Santwani and Arsal K using <a style="color: blue; text-decoration: none;" href="https://easyrender.dylansantwani.com">easyRender.js</a>
            </time>
            <div class="mt-4 flex flex-wrap gap-1 cursor-pointer justify-center">
                <span
                    onclick="window.location.href='https://dylansantwani.com'"
                    class="whitespace-nowrap rounded-full bg-purple-100 px-4 py-1 text-xs sm:text-sm text-purple-600 dark:bg-purple-600 dark:text-purple-100">
                    Other Projects
                </span>

                <span
                    onclick="renderPage('custom')"
                    class="whitespace-nowrap rounded-full bg-purple-100 px-4 py-1 text-xs sm:text-sm text-purple-600 dark:bg-purple-600 dark:text-purple-100 cursor-pointer">
                    Use with your own schedule
                </span>
            </div>
        </div>
    </article>

    <script>
        function toSeconds(h, m, s) {
            return h * 3600 + m * 60 + s;
        }

        function getCurrentPeriod() {
    const now = new Date();
    const currentSeconds = toSeconds(now.getHours(), now.getMinutes(), now.getSeconds());

    const schedule = {
        Monday: [
            ["07:45", "08:35", "Period 1"],
            ["08:35", "08:41", "Pass"],
            ["08:41", "09:34", "Period 2"],
            ["09:34", "09:40", "Pass"],
            ["09:40", "10:30", "Period 3"],
            ["10:30", "10:36", "Pass"],
            ["10:36", "11:26", "Period 4"],
            ["11:26", "11:32", "Pass"],
            ["11:32", "12:22", "Period 5"],
            ["12:22", "12:28", "Pass"],
            ["12:28", "13:18", "Period 6"],
            ["13:18", "13:24", "Pass"],
            ["13:24", "14:14", "Period 7"],
            ["14:14", "14:20", "Pass"],
            ["14:20", "15:10", "Period 8"],
        ],
        // Add other days here as needed...
    };

    const dayOfWeek = now.toLocaleDateString("en-US", { weekday: "long" });
    const daySchedule = schedule[dayOfWeek] || [];

    for (const [start, end, period] of daySchedule) {
        const [startH, startM] = start.split(":").map(Number);
        const [endH, endM] = end.split(":").map(Number);
        const startTime = toSeconds(startH, startM, 0);
        const endTime = toSeconds(endH, endM, 0);

        if (currentSeconds >= startTime && currentSeconds < endTime) {
            const remaining = endTime - currentSeconds;
            const minutes = Math.floor(remaining / 60).toString().padStart(2, "0");
            const seconds = (remaining % 60).toString().padStart(2, "0");

            // Calculate the actual end time (HH:MM AM/PM)
            const endDate = new Date(now);
            endDate.setHours(endH, endM, 0);
            const endTimeString = endDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });

            document.getElementById("current-period").textContent = `Now: ${period}`;
            document.getElementById("time-left").textContent = `Ends at: ${endTimeString} (${minutes}:${seconds} left)`;
            return;
        }
    }
    document.getElementById("current-period").textContent = "Now: Weekend/After School";
    document.getElementById("time-left").textContent = "Ends at: --:-- (--:-- left)";
}


        setInterval(getCurrentPeriod, 1000);
        getCurrentPeriod();
    </script>
</body>

</html>
